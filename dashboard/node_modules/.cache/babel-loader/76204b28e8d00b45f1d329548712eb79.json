{"ast":null,"code":"var _jsxFileName = \"/Users/max180643/Documents/Git/SOP/week-9/dashboard/src/App.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Container, Row, Col, Table, Card, Badge } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faServer, faGlobe, faPlug, faDesktop, faEthernet, faHdd, faLeaf } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction App() {\n  const [firstTime, setFirstTime] = useState(true);\n  const [total, setTotal] = useState(0);\n  const [active, setActive] = useState(0);\n  const [inActive, setInActive] = useState(0);\n  const [instances, setInstances] = useState([]);\n\n  const fetchData = async () => {\n    await axios.get(\"http://localhost:8010/proxy\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    }).then(res => {\n      const data = res.data;\n      const instancesData = data.applications.application;\n      let instancesArray = instances;\n      let currentArray = [];\n\n      if (instancesArray.length === 0) {\n        console.log(\"frist\");\n        instancesData.map(item => {\n          instancesArray.push({\n            name: item.name,\n            data: item.instance[0],\n            status: item.instance[0].status\n          });\n          return item;\n        });\n      } else {\n        console.log(\"not frist\");\n        instancesData.map(item => {\n          currentArray.push({\n            name: item.name,\n            data: item.instance[0],\n            status: item.instance[0].status\n          }); // compare array new array to old array\n\n          currentArray.map(currentItem => {\n            let alreadyInArray = false;\n            instancesArray.map((instance, index) => {\n              if (currentItem.name === instance.name) {\n                alreadyInArray = true; // check current item status down\n\n                if (currentItem.status === \"DOWN\") instancesArray[index].status = \"DOWN\";\n              }\n\n              return instance;\n            }); // check already in instancesArray\n\n            if (!alreadyInArray) {\n              console.log(`new instance: ${currentItem}`);\n              instancesArray.push({\n                name: currentItem.name,\n                data: currentItem.data,\n                status: currentItem.data.status\n              });\n            }\n\n            return currentItem;\n          }); // compare old array to new array\n          // instancesArray.map((instance, index) => {\n          //   let alreadyInArray = false;\n          //   currentArray.map((currentItem) => {\n          //     if (instance.name === currentItem.name) {\n          //       alreadyInArray = true;\n          //     }\n          //     return currentItem;\n          //   });\n          //   if (!alreadyInArray) {\n          //     instancesArray[index].status = \"DOWN\";\n          //   }\n          //   return instance;\n          // });\n\n          return item;\n        });\n        setInstances(instancesArray);\n      } // set total\n\n\n      setTotal(instances.length); // set active and inactive\n\n      const count = status => {\n        let count = 0;\n        instances.map(item => {\n          if (item.status === status) count++;\n          return item;\n        });\n        return count;\n      };\n\n      setActive(count(\"UP\"));\n      setInActive(count(\"DOWN\"));\n      console.log(instances);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    if (firstTime) {\n      fetchData();\n      setFirstTime(false);\n      setInterval(() => fetchData(), 5000);\n    }\n  });\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"mt-3 mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faLeaf,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }), \"Eureka dashboard\"))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    bg: \"primary\",\n    text: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faServer,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }), \"Total\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"d-inline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, total), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"d-inline ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"node\"))))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    bg: \"success\",\n    text: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faGlobe,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }), \"Active\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"d-inline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, active), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"d-inline ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, \"node\"))))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    bg: \"danger\",\n    text: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faPlug,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }), \"Inactive\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"d-inline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }, inActive), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"d-inline ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, \"node\")))))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faDesktop,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 19\n    }\n  }), \"Application Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEthernet,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 19\n    }\n  }), \"Host\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faHdd,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 19\n    }\n  }), \"Instance\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faGlobe,\n    className: \"mr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 19\n    }\n  }), \"Status\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, instances.map(item => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: item.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }, item.data.hostName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }\n    }, item.data.instanceId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Badge, {\n      variant: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 23\n      }\n    }, item.status)));\n  }))))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/max180643/Documents/Git/SOP/week-9/dashboard/src/App.js"],"names":["React","useEffect","useState","Container","Row","Col","Table","Card","Badge","axios","FontAwesomeIcon","faServer","faGlobe","faPlug","faDesktop","faEthernet","faHdd","faLeaf","App","firstTime","setFirstTime","total","setTotal","active","setActive","inActive","setInActive","instances","setInstances","fetchData","get","headers","Accept","then","res","data","instancesData","applications","application","instancesArray","currentArray","length","console","log","map","item","push","name","instance","status","currentItem","alreadyInArray","index","count","catch","error","setInterval","hostName","instanceId"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Container, Row, Col, Table, Card, Badge } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faServer,\n  faGlobe,\n  faPlug,\n  faDesktop,\n  faEthernet,\n  faHdd,\n  faLeaf,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nfunction App() {\n  const [firstTime, setFirstTime] = useState(true);\n  const [total, setTotal] = useState(0);\n  const [active, setActive] = useState(0);\n  const [inActive, setInActive] = useState(0);\n  const [instances, setInstances] = useState([]);\n\n  const fetchData = async () => {\n    await axios\n      .get(\"http://localhost:8010/proxy\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n      })\n      .then((res) => {\n        const data = res.data;\n        const instancesData = data.applications.application;\n\n        let instancesArray = instances;\n        let currentArray = [];\n\n        if (instancesArray.length === 0) {\n          console.log(\"frist\");\n          instancesData.map((item) => {\n            instancesArray.push({\n              name: item.name,\n              data: item.instance[0],\n              status: item.instance[0].status,\n            });\n            return item;\n          });\n        } else {\n          console.log(\"not frist\");\n          instancesData.map((item) => {\n            currentArray.push({\n              name: item.name,\n              data: item.instance[0],\n              status: item.instance[0].status,\n            });\n            // compare array new array to old array\n            currentArray.map((currentItem) => {\n              let alreadyInArray = false;\n              instancesArray.map((instance, index) => {\n                if (currentItem.name === instance.name) {\n                  alreadyInArray = true;\n                  // check current item status down\n                  if (currentItem.status === \"DOWN\")\n                    instancesArray[index].status = \"DOWN\";\n                }\n                return instance;\n              });\n              // check already in instancesArray\n              if (!alreadyInArray) {\n                console.log(`new instance: ${currentItem}`);\n                instancesArray.push({\n                  name: currentItem.name,\n                  data: currentItem.data,\n                  status: currentItem.data.status,\n                });\n              }\n              return currentItem;\n            });\n            // compare old array to new array\n            // instancesArray.map((instance, index) => {\n            //   let alreadyInArray = false;\n            //   currentArray.map((currentItem) => {\n            //     if (instance.name === currentItem.name) {\n            //       alreadyInArray = true;\n            //     }\n            //     return currentItem;\n            //   });\n            //   if (!alreadyInArray) {\n            //     instancesArray[index].status = \"DOWN\";\n            //   }\n            //   return instance;\n            // });\n            return item;\n          });\n          setInstances(instancesArray);\n        }\n        // set total\n        setTotal(instances.length);\n        // set active and inactive\n        const count = (status) => {\n          let count = 0;\n          instances.map((item) => {\n            if (item.status === status) count++;\n            return item;\n          });\n          return count;\n        };\n        setActive(count(\"UP\"));\n        setInActive(count(\"DOWN\"));\n\n        console.log(instances);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  useEffect(() => {\n    if (firstTime) {\n      fetchData();\n      setFirstTime(false);\n      setInterval(() => fetchData(), 5000);\n    }\n  });\n\n  return (\n    <Container className=\"container\">\n      <Row>\n        <Col className=\"mt-3 mb-1\">\n          <h2>\n            <FontAwesomeIcon icon={faLeaf} className=\"mr-2\" />\n            Eureka dashboard\n          </h2>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <Card bg=\"primary\" text=\"white\">\n            <Card.Body>\n              <h4>\n                <FontAwesomeIcon icon={faServer} className=\"mr-2\" />\n                Total\n              </h4>\n              <div>\n                <h1 className=\"d-inline\">{total}</h1>\n                <h5 className=\"d-inline ml-2\">node</h5>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col>\n          <Card bg=\"success\" text=\"white\">\n            <Card.Body>\n              <h4>\n                <FontAwesomeIcon icon={faGlobe} className=\"mr-2\" />\n                Active\n              </h4>\n              <div>\n                <h1 className=\"d-inline\">{active}</h1>\n                <h5 className=\"d-inline ml-2\">node</h5>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n        <Col>\n          <Card bg=\"danger\" text=\"white\">\n            <Card.Body>\n              <h4>\n                <FontAwesomeIcon icon={faPlug} className=\"mr-2\" />\n                Inactive\n              </h4>\n              <div>\n                <h1 className=\"d-inline\">{inActive}</h1>\n                <h5 className=\"d-inline ml-2\">node</h5>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"mt-3\">\n          <Table>\n            <thead>\n              <tr>\n                <th>\n                  <FontAwesomeIcon icon={faDesktop} className=\"mr-2\" />\n                  Application Name\n                </th>\n                <th>\n                  <FontAwesomeIcon icon={faEthernet} className=\"mr-2\" />\n                  Host\n                </th>\n                <th>\n                  <FontAwesomeIcon icon={faHdd} className=\"mr-2\" />\n                  Instance\n                </th>\n                <th>\n                  <FontAwesomeIcon icon={faGlobe} className=\"mr-2\" />\n                  Status\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {instances.map((item) => {\n                return (\n                  <tr key={item.name}>\n                    <td>{item.name}</td>\n                    <td>{item.data.hostName}</td>\n                    <td>{item.data.instanceId}</td>\n                    <td>\n                      <Badge variant=\"success\">{item.status}</Badge>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </Table>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}